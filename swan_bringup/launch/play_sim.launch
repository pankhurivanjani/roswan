<?xml version="1.0"?>
<launch>
    <param name="use_sim_time" value="true" />

    <node pkg="rosbag" type="play" name="gps_compass_player" output="screen" args="--clock --pause -r 10 -s 0 $(find swan_bringup)/../bag/motion_test3_2018-06-19-12-02-19.bag" /><!-- -s 290 -r 1 $(find swan_bringup)/../bag/_2018-05-22-17-08-17_corrected.bag" /-->


    <node pkg="gps_tools" type="utm_tf_node" name="fix_translator" output="screen">
        <rosparam>
            frame_id: odom
            child_frame_id: base_link
            publish_transform: true
            use_imu_orientation: true
            frequency: 20
            rot_covariance: 100
            use_map_frame: true
        </rosparam>
        <rosparam file="$(find swan_navigation)/maps/centre.yaml" command="load" />
    </node>

    <node pkg="tf" type="static_transform_publisher" name="map_to_odom" args="0 0 0 0 0 0 map odom 100" />

    <node pkg="tf" type="static_transform_publisher" name="compass_tf_publisher" args="0 0 0 0 0 0 base_link compass 100" />

    <node pkg="tf" type="static_transform_publisher" name="gps_tf_publisher" args="0 0 0 0 0 0 base_link gps 100" />
    

    <include file="$(find swan_navigation)/launch/navigate.launch" />
    
    <!--node pkg="robot_localization" type="ekf_localization_node" name="robot_pose_ekf" output="screen">
        <rosparam>
            frequency: 20
            sensor_timeout: 0.1
            two_d_mode: true
            odom_frame: odom
            base_link_frame: base_link
            world_frame: map
            imu0: /os5000_data
            odom0: /gps_odom
            odom0_config: [true, true, false,
                           false, false, false,
                           false, false,  false,
                           false, false, false,
                           false, false, false]

            imu0_config:  [false, false, false,
                           false, false, true,
                           false, false, false,
                           false, false, false,
                           false, false, false]

            odom0_queue_size: 20
            imu0_queue_size: 20
            imu0_remove_gravitational_acceleration: false
            gravitational_acceleration: 9.80665
            publish_tf: true

        </rosparam>
    </node-->

</launch>

